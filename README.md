The tidyr library is loaded as this is needed for the gather() function.

The working directory is changed to retrieve the activity labels from activity_labels.txt, and features from features.txt. As the activity labels do not have proper variable names, I have called them "activity_class_num", where "num" stands for numeric, and "activity".

Next, I retrieve the test data. As this is located in a different folder, I change the working directory to where it is stored. The subjects making up the test data are loaded from subject_test.txt. As the subject label does not have a proper variable name, I have called it "subject". X_test.txt contains the readings for all the test features. This is loaded and so is y_test.txt which contains the numeric activity labels. The numeric activity labels variable does not have a proper name, so I have called it "activity_class_num", where "num" stands for numeric. The column names for X_test.txt are the rows in the second column of features.txt. I therefore use them as the variable names for X_test.txt.

The following data manipulations extract only the measurements on the mean and standard deviation for each measurement using the grepl function and combine the test set subjects, numeric activity labels and mean and standard deviation measurements with the cbind function. The activity labels are merged so that the test data set does not only have the numeric activity labels, but also the activity name. I view the feature columns not as multiple variables, but just one variable, so I collapse them into two variables, feature and value, using the gather function. I provide further details on the feature variable in my code book. The average of each variable for each activity and each subject is calculated with the aggregate and mean functions. I include another variable "set" and populate this with "test" to show this is the test set.

The training data is retrieved next. As this is located in a different folder, I change the working directory to where it is stored. The subjects making up the training data are loaded from subject_train.txt. As the subject label does not have a proper variable name, I have called it "subject". X_train.txt contains the readings for all the train features. This is loaded and so is y_train.txt which contains the numeric activity labels. The numeric activity labels variable does not have a proper name, so I have called it "activity_class_num", where "num" stands for numeric. The column names for X_train.txt are the rows in the second column of features.txt. I therefore use them as the variable names for X_train.txt.

The following data manipulations extract only the measurements on the mean and standard deviation for each measurement using the grepl function and combine the training set subjects, numeric activity labels and mean and standard deviation measurements with the cbind function. The activity labels are merged so that the training data set does not only have the numeric activity labels, but also the activity name. I view the feature columns not as multiple variables, but just one variable, so I collapse them into two variables, feature and value, using the gather function. I provide further details on the feature variable in my code book. The average of each variable for each activity and each subject is calculated with the aggregate and mean functions. I include another variable "set" and populate this with "training" to show this is the training set.

Finally, I merge the training and the test sets and order this merged set by subject, activity and feature to create one tidy data set. I change the working directory to where my R code for this assignment, run_analysis.R, is located and output the tidy data set, tidy_data.txt there, removing the row names.